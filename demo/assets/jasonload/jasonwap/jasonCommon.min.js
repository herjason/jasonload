/*
**author:jasonYang**
**web:jasonwap.zglingjie.com**
**email:914412726@qq.com**
2014-12-04
*/
function alertDlg(a,b){return $.jasonPopup({title:"提示",message:'<div style="margin:0 3%;font-size:0.875em;">'+a+"</div>",cancelText:"确定",cancelCallback:b||function(){},cancelOnly:!0})}function confirmDlg(a,b,c){return $.jasonPopup({title:"提示",message:'<div style="margin:0 3%;font-size:0.875em;">'+a+"</div>",doneText:"确定",doneCallback:b||function(){},cancelCallback:c||function(){}})}define("",[],function(){});var jason=$;!function(a){a.fn.jasonScrollbar=function(a){return new c(a,this)};var b=new Array,c=function(c,d){var e=this;e.element=a(d),e.opt={moveY:0,maxMoveY:0},e.scrollNode=null,e.barNode=null,e.barNodeHeight=0,e.barNodeLock=0,e.param=a.extend({},{isShowBar:!0},c),e.start(),b.push(e)};c.prototype={start:function(){var b,c,d=this,e=this.element,f=0,g=e.height();if(g.indexOf("%")>=0||isNaN(g)){var h=e.parent().height();g=(h>window.innerHeight?window.innerHeight:h)*parseFloat(g.replace("%",""))/100}var i=!1;"jasonScrollbar"!=e.css({overflow:"hidden",height:g+"px"}).children().eq(0).attr("scrollbarBox")&&(e.html('<div scrollbarBox="jasonScrollbar" style="width:100%;">'+e.html()+"</div>"),i=!0);var j=e.children().eq(0);if(d.scrollNode=j,d.opt.maxMoveY=g-j.height(),d.opt.maxMoveY=d.opt.maxMoveY>0?0:d.opt.maxMoveY,d.param.isShowBar){var k=e.css("position");if("absolute"!=k&&"fixed"!=k&&e.css("position","relative"),i){var l=document.createElement("div");e.append(l);var m=d.barNode=a(l);m.attr("barNode","yes")}else{var m=d.barNode=e.find("[barNode]");e.unbind("touchstart touchmove touchend")}var n=g*g/j.height();n=n>g?g:n,m.css({position:"absolute",top:"0",right:"2px",width:"5px",height:n+"px","background-color":"#000",opacity:"0.3","border-radius":"5px",display:"none"}),d.barNodeHeight=m.height()}e.bind("touchstart",function(a){a.stopPropagation(),j.css({"-webkit-transition-duration":"0s","transition-duration":"0s"}),d.barNodeLock=1,d.param.isShowBar&&(m.css({"-webkit-transition-duration":"0ms","transition-duration":"0ms"}),m.css("opacity","0.3"),m.show()),c=a.touches[0].pageY,f=a.touches[0].pageY-d.opt.moveY,b=a.timeStamp||Date.now()}),e.bind("touchmove",function(a){a.preventDefault(),a.stopPropagation(),d.barNodeScolling();var e=a.touches[0].pageY;d.opt.moveY=e-f,j.cssTranslate("0,"+d.opt.moveY+"px");var g=a.timeStamp||Date.now();g-b>300&&(c=e,b=g)}),e.bind("touchend",function(a){var e=(a.changedTouches[0].timeStamp||Date.now())-b,f=a.changedTouches[0].pageY-c;if(300>e&&Math.abs(f)>10&&d.opt.moveY<0&&d.opt.moveY>d.opt.maxMoveY){var g=d.momentum(f,e);d.opt.moveY+=g.dist,d.opt.moveY>0?d.opt.moveY=20:d.opt.moveY<d.opt.maxMoveY&&(d.opt.moveY=d.opt.maxMoveY-20),j.css({"-webkit-transition-duration":g.time+"ms","transition-duration":g.time+"ms"}),j.cssTranslate("0,"+d.opt.moveY+"px"),d.barNodeScolling(g.time),d.rebound(g.time)}else d.rebound()})},rebound:function(a){var b=this,c=0;a||(a=0),setTimeout(function(){$tmp=b.scrollNode,$tmp.css({"-webkit-transition-duration":"0.2s","transition-duration":"0.2s"}),b.opt.moveY>0?($tmp.cssTranslate("0,0"),b.opt.moveY=0,c=300):b.opt.moveY<b.opt.maxMoveY&&($tmp.cssTranslate("0,"+b.opt.maxMoveY+"px"),b.opt.moveY=b.opt.maxMoveY,c=300),b.barNodeScolling(c),b.barNodeLock=0,setTimeout(function(){if(!b.barNodeLock&&b.param.isShowBar){var a=b.barNode;a.css({"-webkit-transition-duration":"500ms","transition-duration":"500ms"}),a.css("opacity","0"),setTimeout(function(){b.barNodeLock||(a.hide(),a.css({"-webkit-transition-duration":"0ms","transition-duration":"0ms"}),a.css("opacity","0.3"))},500)}},c)},a)},momentum:function(a,b){var c=.001,d=Math.abs(a)/b,e=d*d/(2*c),f=d/c;return{dist:a>0?e:-e,time:f}},barNodeScolling:function(a){var b=this;if(b.param.isShowBar){var c=b.scrollNode,d=b.element,e=b.barNode;a||(a=0);var f=b.opt.moveY/(c.height()/d.height()),g=d.height()-5;e.css({"-webkit-transition-duration":a+"ms","transition-duration":a+"ms"}),e.cssTranslate("0,"+(f>0?0:-g>f?g:-f)+"px");var h=b.barNodeHeight-(f>0?f:f<-(g-b.barNodeHeight+5)?-(g-b.barNodeHeight+5)-f:0);h=5>h?5:h,e.css("height",h+"px")}}}}(jason),function(a){var b;a.jasonPopup=a.fn.jasonPopup=function(a){return new d(a)};var c=new Array,d=function(d){var e=this;e.popupNode=b,e.windowHeight=a.os.android?window.innerHeight>480?window.innerHeight:480:window.innerHeight,e.isLock=0,e.hasPopupPosition=0,e.isBlurPosition=!1,e.opt=a.extend({},{bgStyle:"",boxStyle:"",title:"",titleStyle:"",titleLeftText:"",titleLeftStyle:"",titleLeftCallback:function(){},titleRightText:"",titleRightStyle:"",titleRightCallback:function(){},message:"",btnStyle:"",cancelText:"取消",cancelStyle:"",cancelCallback:function(){},doneText:"确认",doneStyle:"",doneCallback:function(){},cancelOnly:!1,noBtn:!1,isBgClick:!1,position:"center",height:.7,duration:300,closeText:"",closeStyle:"",closeCallback:function(){},isScroll:!0,onShow:function(){}},d),e.prepend(),c.push(e)};d.fn=d.prototype={prepend:function(){var b,d,e,f=this,g=f.opt.bgStyle,h=f.opt.boxStyle,i=f.opt.title,j=f.opt.titleStyle,k=f.opt.titleLeftText,l=f.opt.titleLeftStyle,m=f.opt.titleLeftCallback,n=f.opt.titleRightText,o=f.opt.titleRightStyle,p=f.opt.titleRightCallback,q=f.opt.message,r=f.opt.btnStyle,s=f.opt.cancelText,t=f.opt.cancelStyle,u=f.opt.cancelCallback,v=f.opt.doneText,w=f.opt.doneStyle,x=f.opt.doneCallback,y=f.opt.cancelOnly,z=f.opt.noBtn,A=f.opt.isBgClick,B=f.opt.position,C=f.opt.closeText,D=f.opt.closeStyle,E=f.opt.closeCallback,F=f.opt.onShow,G=document.createElement("div"),H="position:absolute;height:36px;line-height:36px;top:11px;color:#868686;font-weight:normal;";b=""==k?"":'<div class="jasonPopuptitleLeftBtn85js93" style="'+H+"left:10px;"+l+'">'+k+"</div>",d=""==n?"":'<div class="jasonPopuptitleRightBtn85js93" style="'+H+"right:10px;"+o+'">'+n+"</div>",e=""==C?"":'<div class="jasonPopupCloseBtn85js93" style="'+H+"right:10px;"+D+'">'+C+"</div>";var I='<div class="jasonPopupBgDiv847fd8" style="position:fixed;width:100%;height:100%;top:0;left:0; background-color:#666; opacity:0.5; z-index:'+(1e3+c.length)+";"+g+'"></div><div class="jasonPopupBox39fj7d" style="position:fixed;display:none;left:0;'+("center"==B?"top:50%;left:-80%;width:80%;border-radius:5px;":"bottom"==B?"bottom:-100%;left:0;width:100%;":"top:-100%;left:0;width:100%;")+"z-index:"+(1001+c.length)+";color:#454545;background-color:#fff;"+h+'">'+(""==i?"":'<div class="jasonPopupTitle384jx8" style="padding:15px 10px;line-height:26px;text-align:center;font-weight:bold;font-size:1.125em;position:relative;'+j+'">'+b+i+d+e+"</div>")+'<div class="jasonPopupContent98fd3" style="width:100%;line-height:22px;text-align:center;">'+q+"</div>";z||"center"!=B||(I+='<ul class="jasonPopupBtn739jg0s" style="position:relative;z-index:9999;width:100%;color:#007aff;height:45px;line-height:45px;border-top:1px solid #bcbcbc;margin-top:15px;'+r+'">	<li style="float:left;width:50%;text-align:center;'+t+'">'+s+"</li>"+(y?"":'<li style="float:left;width:50%;box-sizing:border-box;text-align:center;border-left:1px solid #bcbcbc;'+w+'">'+v+'</li><li style="height:0;clear:both;"></li>')+"</ul>"),I+="</div>",G.innerHTML=I,f.popupNode=G,$el=a(G),a("body").append(G),z||"center"!=B||($el.find(".jasonPopupBtn739jg0s li").eq(0).bind("click",function(){u(),f.remove(0)}),y||$el.find(".jasonPopupBtn739jg0s li").eq(1).bind("click",function(){x(),f.remove(0)})),A&&$el.find(".jasonPopupBgDiv847fd8").bind("click",function(){E(),f.remove()}),$el.find(".jasonPopuptitleLeftBtn85js93").bind("click",function(){m(),f.remove()}),$el.find(".jasonPopuptitleRightBtn85js93").bind("click",function(){p(),f.remove()}),$el.find(".jasonPopupCloseBtn85js93").bind("click",function(){E(),f.remove()}),$el.bind("orientationchange",function(){var b=f.windowHeight>480?480:320;f.windowHeight=a.os.android?window.innerHeight>b?window.innerHeight:b:window.innerHeight,f.positionPopup()}),f.inputPosition(),a(window).bind("touchmove",function(a){a.preventDefault()}),y&&$el.find(".jasonPopupBtn739jg0s li").eq(0).css({"float":"none",width:"100%",border:"0"}),f.opt.duration="center"==B?300:600,f.positionPopup(),F()},inputPosition:function(){var b=this;a(b.popupNode).find("input").unbind("focus").bind("focus",function(){if(a.os.android&&"bottom"!=b.opt.position){b.isBlurPosition=!1;var c=this,d=c.getBoundingClientRect().bottom,e=d-((b.windowHeight-260)/2+20)+b.hasPopupPosition;b.positionPopup(e),b.hasPopupPosition=e,a(c).unbind("blur").bind("blur",function(){b.isBlurPosition=!0,setTimeout(function(){b.isBlurPosition&&(b.positionPopup(),b.hasPopupPosition=0)},100)})}})},lock:function(){this.isLock=1},unlock:function(){this.isLock=0},show:function(){a(this.popupNode).show(),a(window).unbind("touchmove").bind("touchmove",function(a){a.preventDefault()})},hide:function(b){var c=this,d=c.opt.position,e=isNaN(b)?c.opt.duration:b,f=a(c.popupNode).find(".jasonPopupBox39fj7d");f.css({"-webkit-transition-duration":e+"ms"});var g=f.css("center"==d?"top":d);f.css("center"==d?"top":d,-c.opt.height*c.windowHeight),setTimeout(function(){a(window).unbind("touchmove"),a(c.popupNode).hide(),f.css({"-webkit-transition-duration":"0ms"}),f.css("center"==d?"top":d,g)},e)},remove:function(b){var d=this;if(!d.isLock){var e=d.opt.position,f=isNaN(b)?d.opt.duration:b,g=a(d.popupNode).find(".jasonPopupBox39fj7d");g.css({"-webkit-transition-duration":f+"ms"}),g.css("center"==e?"top":e,-d.opt.height*d.windowHeight),setTimeout(function(){c.splice(0,1),a(window).unbind("touchmove"),a(d.popupNode).unbind("orientationchange").remove(),c.length>0&&c[0].show()},f)}},positionPopup:function(b){var c=this;document.body.scrollTop=window.pageYOffset;var d=b?b:0,e=c.opt.position,f=a(c.popupNode).find(".jasonPopupBox39fj7d"),g=f.width();g.indexOf("%")>0&&(g=g.substring(0,g.length-1)/100*window.innerWidth);var h=c.opt.duration;f.css({left:(window.innerWidth-g)/2,display:"block","-webkit-transition-duration":h+"ms"});var i=c.windowHeight,j=""==c.opt.title?0:f.find(".jasonPopupTitle384jx8").offset().height,k=c.opt.noBtn||"center"!=e?0:f.find(".jasonPopupBtn739jg0s").offset().height,l=(1-c.opt.height)*i;(f.offset().height>i-l||"bottom"==e)&&(f.find(".jasonPopupContent98fd3").css({height:i-j-k-l+"px",overflow:"hidden"}),c.opt.isScroll&&($el.find(".jasonPopupContent98fd3").jasonScrollbar(),c.inputPosition())),f.css("center"==e?"top":e,"center"==e?(i-2*d-f.offset().height)/2:"bottom"==e?d:-d)}}}(jason),function(a){a.fn.jasonSelectDlg=function(b,c){if(!a.isArray(b))return console.log("first param is not array!");var d=a(this),e=d.data("value"),f=d.html();(""==e||""==f)&&(e=b[0].value,f=b[0].text,d.data("value",e),d.html(f)),d.unbind("click").bind("click",function(){e=d.data("value");var g=a.extend({},{liStyle:"",selectedStyle:"",selectedImgUrl:"",selectedImgStyle:"",selectedCallback:function(){},boxStyle:"background:#f5f5f5;",title:"请选择",titleStyle:"background:#f9f9f9;border-bottom:1px solid #ddd;",position:"bottom",isBgClick:!0},c),h=g.selectedImgUrl?'<img src="'+g.selectedImgUrl+'" style="padding-left:15px;width:13px;vertical-align:middle;position:absolute;top:16px;'+g.selectedImgStyle+'" />':"",i='<ul class="jasonSelectDlg37dj8">';for(var j in b){var k=b[j];i+='<li data-value="'+k.value+'" data-text="'+k.text+'" style="line-height:22px; padding:12px 0 12px;font-size:0.9375em; color:#454545; border-bottom:1px solid #eceaea;text-align:center;position:relative;'+g.liStyle+(e==k.value?(g.selectedImgUrl?"":"color:#00f;font-weight:bold;")+g.selectedStyle:"")+'">'+k.text+(e==k.value?h:"")+"</li>"}i+="</ul>",g=a.extend({},{message:i},g);var l=a.jasonPopup(g);a(".jasonSelectDlg37dj8 li").bind("click",function(){e=a(this).data("value"),f=a(this).data("text"),d.data("value",e),d.html(f),l.remove(),g.selectedCallback({value:e,text:f})})})}}(jason),function(a){a.fn.jasonImgLazyLoad=function(b){for(var c=a(this),b=a.extend({},{lazy_src:"lazy-src",lazy_style:"lazy-style",container:window,e:"scroll",threshold:0,vertical:!0},b),d=b.lazy_src,e=b.lazy_style,f=a(b.container),g=b.e,h=b.threshold,i=b.vertical,j=parseInt(i?f.height():f.width()),k=new Array,l=0;l<c.length;l++)a(c[l]).attr(d)&&k.push(c[l]);var m=function(){for(var b=0;b<k.length;b++){var c=k[b],f=a(k[b]),g=parseInt(i?window.pageYOffset:window.pageXOffset),l=parseInt(i?c.y:c.x);if(g+j+h>l&&f.attr(d)){var m=document.createElement("img");m.src=f.attr(d),m.style.display="none",m.target=f,a("body").append(m);var n=function(b,c){var f=c;f.attr({src:f.attr(d),style:f.attr(e)}),a(b).remove()};window.ActiveXObject?m.onreadystatechange=function(){"complete"==this.readyState&&n(this,this.target)}:m.onload=function(){1==this.complete&&n(this,this.target)},k.splice(b--,1)}}};f="scroll"===g?f:a(this),f.bind(g,function(){m()}),m()}}(jason),function(a){a.jasonUIBind=a.fn.jasonUIBind=function(){for(var b=a("[jason-dom]"),c=0;c<b.length;c++){var d=a(b[c]),e=d.attr("jason-dom");if("body"==e){if(a(".jFoot").length>0)var f=window.innerHeight-a(".jFoot").offset().height;else var f=window.innerHeight;d.css({height:f,margin:"0",padding:"0"})}}for(var g=a("[jason-js]"),c=0;c<g.length;c++){g=a("[jason-js]");var h=a(g[c]),i=h.attr("jason-js");"scroll"==i?h.jasonScrollbar({isShowBar:!1}):"scrollbar"==i&&h.jasonScrollbar()}}}(jason);