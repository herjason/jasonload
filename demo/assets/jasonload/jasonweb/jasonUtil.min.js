/*
**author:jasonYang**
**web:jasonwap.zglingjie.com**
**email:914412726@qq.com**
*/
define("jasonweb/jasonUtil",["jquery"],function(require,exports,module){var $=require("jquery"),jasonUtil={ajaxMask:"mask",lockMask:0,maskNode:null};jasonUtil.showMask=function(a,b){var c=this,a=a||"请求中...",d=$(".jasonloadMaskNode");if(c.lockMask=1,d.length<=0){var e='<div class="jasonloadMaskNode" style="position:fixed;top:50%;left:50%; min-width:200px;max-width:500px;border:1px solid #f2f2f2; line-height:23px; background-color:#000; opacity:0.7; z-index:1999; border-radius:5px;"><div class="jasonloadMaskNodeBg" style="position:fixed;left:0;top:0;width:100%;height:100%;"></div><div class="jasonloadMaskNodeImg">'+(!c.isStrEmpty(b)||"object"==typeof jl&&"object"==typeof jl.params&&!c.isStrEmpty(jl.params.ldImg)?'<img src="'+(c.isStrEmpty(b)?b:jl.params.ldImg)+'" />':"")+'</div><div class="jasonloadMaskNodeText" style="color:#fff;font-size:14px;text-align:center;padding:10px 15px;">'+a+"</div>";$("body").append(e),d=$(".jasonloadMaskNode")}else d.find(".jasonloadMaskNodeText").html(a);$(".jasonloadMaskNode").css({"margin-left":-d.width()/2,"margin-top":-d.height()/2})},jasonUtil.hideMask=function(){var a=this,b=$(".jasonloadMaskNode");a.lockMask=0;var c=function(){b.length>0&&!a.lockMask&&b.remove()};setTimeout(c,10)},jasonUtil.flashMask=function(a,b,c){var d=this;d.showMask(a),setTimeout(function(){d.hideMask(),"function"==typeof b?b():"function"==typeof c&&c()},isNaN(b)?2e3:b)},jasonUtil.getScrollTop=function(){return"pageYOffset"in window?window.pageYOffset:"BackCompat"===document.compatMode?document.body.scrollTop:document.documentElement.scrollTop},jasonUtil.setScrollTop=function(a){window.pageYOffset=a,document.body.scrollTop=a,document.documentElement.scrollTop=a},jasonUtil.getDocumentHeight=function(){return document.body.clientHeight||document.documentElement.clientHeight},jasonUtil.gotoUrl=function(a,b){var c=this;c.showMask("加载中..."),window.setTimeout(function(){c.hideMask(),window.location.href=a},isNaN(b)?300:b)},jasonUtil.isStrEmpty=function(a){return null==a?!0:"null"==a?!0:"undefined"==typeof a?!0:""==typeof a?!0:"\n"==typeof a?!0:0==a.length?!0:!1},jasonUtil.ajaxJson=function(type,url,data,callback,time){var self=this;"mask"==self.ajaxMask&&self.showMask(),$.ajax({type:type,url:url,data:data,success:function(data){if(self.hideMask(),"function"!=typeof callback||callback instanceof RegExp)return self.flashMask("错误提示：请传入正确的回调函数");try{var rsp;rsp="string"!=typeof data?data:self.isStrEmpty(JSON)?JSON.parse(data):eval("("+data+")")}catch(e){self.flashMask("undefined"==typeof interface_return_data_error||self.isStrEmpty(interface_return_data_error)?"请求失败：后端数据接口返回json数据格式错误！":interface_return_data_error,isNaN(time)?3e3:time)}callback(rsp)},error:function(){self.hideMask(),self.flashMask("undefined"==typeof ajax_error||self.isStrEmpty(ajax_error)?"请求失败：网络出错或超时！":ajax_error,isNaN(time)?3e3:time)}})},jasonUtil.getJson=function(a,b,c,d){this.ajaxJson("get",a,b,c,d)},jasonUtil.postJson=function(a,b,c,d){this.ajaxJson("post",a,b,c,d)},jasonUtil.radioVal=function(a){var b="";return $(a).each(function(){this.checked&&(b=this.value)}),b},jasonUtil.getParam=function(a){for(var b=window.location.href,c=b.substring(b.indexOf("?")+1),d=c.split("&"),e=0;e<d.length;e++){var f=d[e].split("=");if(f[0]==a)return f[1].indexOf("#")>=0?f[1].substring(0,f[1].indexOf("#")):f[1]}return""},module.exports=jasonUtil});