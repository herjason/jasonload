/*
**author:jasonYang**
**web:jasonwap.zglingjie.com**
**email:914412726@qq.com**
*/
function localSupport(){try{if(!("localStorage"in window)||null==window.localStorage)return alert("您的浏览器不支持本地存储!"),!1}catch(a){return alert(a),!1}return!0}function localSave(a,b){if(!localSupport())return null;if("undefined"==typeof a)return null;if("undefined"!=typeof b&&null!=b)return localStorage.setItem(a,b),b;var c=localStorage.getItem(a);return"undefined"==c?null:c}function localLoadItem(a){return localSave(a)}function localLoadKey(a){if(!localSupport())return null;for(var b=new Array,c=0;c<localStorage.length;c++){var d=localStorage.key(c);0==d.indexOf(a)&&b.push(d)}return b}function localRemove(a){return localSupport()?"undefined"==typeof a?null:void localStorage.removeItem(a):null}function localClearCart(a){try{for(var b=localLoadKey(a+"_"),c=0;c<b.length;c++)localStorage.removeItem(b[c]);gCartMenuItemList=new Array}catch(d){}}if(!window.jasonload||"function"!=typeof jasonload){var jasonload=window.jasonload=function(a){var b,c,d=function(a){var c=this;c.params=c.extend({},{ldImg:"",errImg:"",timeOut:1e4,base:"",alias:{},paths:{},vars:{},map:[],preload:[],prompt:!1,jsFolder:"",jsVer:"",jsVTag:"",cssFolder:"",cssVer:"",cssVTag:"",jasonBodyId:"jason_body",jasonContentClass:"jason_content"},a),c.vars={lockMask:0},c.jsLC=0,c.jsCC=0,c.cssLC=0,c.cssCC=0,c.cache={jsReady:"",jsLoading:"",cssLoading:"",cssReady:"",scrollTop:{}},c.module={exports:{}},c.jsRelyData={},c.jsReadyCB=null,c.cssReadyCB=null,c.allReadyCB=null,c.moduleReadyCB=[],c.MaskNode=b,c.tplNode,c._renderNode={},c._is={_render:!0},c.cacheNode={},c._curModPageId="",c.cacheData={}};return d.fn=d.prototype={tag:function(a){return document.getElementsByTagName(a)},ce:function(a){return document.createElement(a)},isObject:function(a){return"object"==typeof a&&null!==a},isArray:function(a){return a instanceof Array&&a.push!=b},isFunction:function(a){return"function"==typeof a&&!(a instanceof RegExp)},getScrollTop:function(){return window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop},setScrollTop:function(a){a=isNaN(a)?0:a,window.scroll(0,a)},extend:function(a){if(a==b&&(a=this),1===arguments.length){for(var c in a)this[c]=a[c];return this}for(var d=Array.prototype.slice.call(arguments,1),e=0;e<d.length;e++)for(var c in d[e])a[c]=d[e][c];return a},_typeof:function(a){return".css"===a.substring(a.length-4)||a.indexOf(".css?")>=0?"css":"js"},getPath:function(a,c){var d=this;if(!a)return"";a=d.params.alias[a]!=b?d.params.alias[a]:a;var e=/^([^\/:]+)(\/.+)$/;(m=a.match(e))&&d.params.paths[m[1]]!=b&&(a=d.params.paths[m[1]]+m[2]);var f=/{([^{]+)}/g;a.indexOf("{")>-1&&(a=a.replace(f,function(a,c){return d.params.vars[c]!=b?d.params.vars[c]:a})),a=d.normalize(a),a=d.addBase(a,c);for(var g=a,h=0,i=d.params.map.length;i>h;h++){var j=d.params.map[h];if(g=d.isFunction(j)?j(a)||a:a.replace(j[0],j[1]),g!==a)break}return a=g},addBase:function(a,b){var c=this,d=/^\/\/.|:\//,e=/^.*?\/\/.*?\//,f=location.href&&0!==location.href.indexOf("about:")?c.dirname(location.href):"",g=a,h=a.charAt(0);if(d.test(a))g=a;else if("."===h)g=c.realpath((b?c.dirname(b):f)+a);else if("/"===h){var i=f.match(e);g=i?i[0]+a.substring(1):a}else g="css"==c._typeof(a)?(""==c.params.cssFolder?c.params.base:c.params.cssFolder)+c.params.cssVer+a:(""==c.params.jsFolder?c.params.base:c.params.jsFolder)+c.params.jsVer+a;return 0===g.indexOf("//")&&(g=location.protocol+g),g},normalize:function(a){var b=a.length-1,c=a.charAt(b);return"#"===c?a.substring(0,b):".js"===a.substring(b-2)||a.indexOf(".js?")>=0||"/"===c||".css"===a.substring(b-3)||a.indexOf(".css?")>=0?a:a.indexOf("?")>0?a.substring(0,a.indexOf("?"))+".js"+a.substring(a.indexOf("?")):a+".js"},dirname:function(a){var b=/[^?#]*\//;return a.match(b)[0]},realpath:function(a){var b=/\/\.\//g,c=/\/[^\/]+\/\.\.\//,d=/([^:\/])\/+\//g;for(a=a.replace(b,"/"),a=a.replace(d,"$1/");a.match(c);)a=a.replace(c,"/");return a},getId:function(a){return a.indexOf(".js")>=0&&(a=a.substring(0,a.indexOf(".js"))),a},showMask:function(a){var d=this;d.vars.lockMask=1,"mask"==d.params.prompt&&d.domReady(function(){if(d.MaskNode==b||!d.MaskNode.parentNode){var e=d.ce("div"),f=a||"加载中...";""!=d.params.ldImg&&(f='<div><img src="'+d.params.ldImg+'" /></div><div>'+f+"</div>"),e.innerHTML='<div style="position:fixed;top:50%;margin-top:-65px;width:220px;line-height:26px;padding:15px 0;background-color:#000;opacity:0.6;z-index:1000;text-align:center;color:#fff;border-radius:4px;font-size:13px;">'+f+"</div>",d.MaskNode=e.childNodes[0],d.tag("body")[0].appendChild(d.MaskNode),d.MaskNode.style.left=(window.innerWidth-parseInt(d.MaskNode.style.width))/2+"px",c=setTimeout(function(){d.MaskNode!=b&&(d.MaskNode.innerHTML=d.MaskNode.innerHTML+'<div style="font-size:0.63em;color:#f2f2f2;">网络有点慢，请耐心等候！</div>')},d.params.timeOut)}})},hideMask:function(){var a=this;a.vars.lockMask=0;var d=function(){a.MaskNode==b||a.vars.lockMask||(a.MaskNode.parentNode&&a.MaskNode.parentNode.removeChild(a.MaskNode),a.MaskNode=b,clearTimeout(c))};setTimeout(d,10)},config:function(a){this.params=this.extend({},this.params,a)},domReady:function(a){var b=this;"complete"===document.readyState||"loaded"===document.readyState||!navigator.userAgent.match(/MSIE 10.0/i)&&!navigator.userAgent.match(/Trident\/7/i)&&"interactive"===document.readyState?b.checkCB(a):document.addEventListener("DOMContentLoaded",function(){b.checkCB(a)},!1)},jsReady:function(a){this.jsReadyC(a)},jsReadyC:function(a){var b=this;b.jsLC>=b.jsCC?(b.jsReadyCB=null,b.checkCB(a)):b.jsReadyCB=a},cssReady:function(a){var b=this;b.cssLC>=b.cssCC?(b.cssReadyCB=null,b.checkCB(a)):b.cssReadyCB=a},allReady:function(a){var b=this;b.jsLC>=b.jsCC&&b.cssLC>=b.cssCC?(b.allReadyCB=null,b.checkCB(a)):b.allReadyCB=a},moduleReady:function(a){var c=this;c.isObject(a)&&c.moduleReadyCB.push(a),a=c.moduleReadyCB;for(var d=a.length-1;d>=0;d--){for(var e=a[d],f=!0,g=0;g<e.deps.length;g++)("css"==c._typeof(e.deps[g])&&c.cache.cssReady.indexOf(e.deps[g])<0||"js"==c._typeof(e.deps[g])&&(e.deps[g].indexOf("?loadjs")<0&&c.module[c.getId(e.deps[g])]==b||e.deps[g].indexOf("?loadjs")>0&&c.cache.jsReady.indexOf(e.deps[g])<0))&&(f=!1);f&&(c.moduleReadyCB.splice(d,1),c.checkCB(e))}},checkCB:function(b){var c=this;if(c.jsLC>=c.jsCC&&c.cssLC>=c.cssCC&&c.hideMask(),c.isFunction(b))b();else if(c.isObject(b)){var d=b;if("preload"==d.type)d.callback();else if("use"==d.type){for(var e=[],f=0;f<d.deps.length;f++)e[f]=c.module[c.getId(d.deps[f])];d.callback.apply(a,e)}else if("define"==d.type){var g=function(a){return a=c.getPath(a,d.path),c.module[c.getId(a)]?c.module[c.getId(a)]:("js"==c._typeof(a)&&a.indexOf("?loadjs")<0&&(c._requireLoad(c.getPath(a)),console.log("error:"+a+" hadn't loaded or not a module js.if it is not a module,you can add “loadjs” to the next of “?”")),!1)};g.async=function(a,b){var d=c.params.prompt;c.params.prompt=!1,c._requireLoad(c.getPath(a),b),c.params.prompt=d},d.callback(g,c.module.exports,c.module)?c.module[c.getId(d.path)]=d.callback(g,c.module.exports,c.module):(c.module[c.getId(d.path)]=c.module.exports,c.module.exports={})}}},jsRely:function(a,b,c){var d=this;""!=a&&""!=b&&(a=d.getPath(a),b=d.getPath(b),d.jsCC++,d.showMask(),d.domReady(function(){if(d.cache.jsReady.indexOf(a)>=0)d._load("js",b,c);else if(d.cache.jsLoading.indexOf(a)>=0){"undefined"==typeof d.jsRelyData[a]&&(d.jsRelyData[a]=[]);var e={path:b,callback:c};d.jsRelyData[a].push(e)}else d._loadjs(a,function(){d._load("js",b,c)})}))},js:function(a,b){var c=this;a=c.getPath(a),c._loadjs(a,b)},css:function(a,b){var c=this;a=c.getPath(a),c._loadcss(a,b)},load:function(a,b){var c=this;c._requireLoad(c.getPath(a),b)},_loadjs:function(a,b){var c=this;""==a||c.cache.jsLoading.indexOf(a)>=0||(c.jsCC++,c.cache.jsLoading+=a,c.showMask(),c.domReady(function(){c._load("js",a,b)}))},_loadcss:function(a,b){var c=this;""==a||c.cache.cssLoading.indexOf(a)>=0||(c.cssCC++,c.cache.cssLoading+=a,c.showMask(),c.domReady(function(){c._load("css",a,b)}))},_load:function(a,b,c){var d=this,e=!1;if("css"==a){var f=d.ce("link");f.type="text/css",f.rel="stylesheet",f.href=b+(b.indexOf("?")<0&&""!=d.params.cssVTag&&"?"!=d.params.cssVTag.charAt(0)?"?":"")+d.params.cssVTag}else{var f=d.ce("script");f.type="text/javascript",f.src=b+(b.indexOf("?")<0&&""!=d.params.jsVTag&&"?"!=d.params.jsVTag.charAt(0)?"?":"")+d.params.jsVTag}var g=d.tag("head")[0];b.indexOf("?insertToFirst")>=0?g.insertBefore(f,g.childNodes[0]):g.appendChild(f);var h=function(){if("css"==a)d.cache.cssReady+=b,d.cssLC++,d.checkCB(c),null!=d.cssReadyCB&&d.cssReady(d.cssReadyCB);else{if(d.cache.jsReady+=b,d.cache.jsLoading.replace(b,""),d.module,d.jsLC++,d.checkCB(c),null!=d.jsReadyCB&&d.jsReadyC(d.jsReadyCB),"undefined"!=typeof d.jsRelyData[b])for(var e=d.jsRelyData[b],g=0;g<e.length;g++)d._load("js",e[g].path,e[g].callback);setTimeout(function(){d.tag("head")[0].removeChild(f)},10)}null!=d.allReadyCB&&d.allReady(d.allReadyCB),d.moduleReadyCB.length>0&&setTimeout(function(){d.moduleReady("0")},10)},i=function(){("loaded"==f.readyState||"complete"==f.readyState)&&h()},j=function(){var a=!1;f.sheet&&(h(),a=!0),a||setTimeout(function(){j()},1)},k=function(){"css"==a&&/webkit/i.test(navigator.userAgent)&&(j(),e=!0),"undefined"!=typeof f.onreadystatechange&&(f.onreadystatechange=i,e=!0),"undefined"==typeof f.onload||e||(f.onload=h),"undefined"!=typeof f.onerror&&(f.onerror=function(){d.cache.jsLoading.replace(b,""),d.tag("head")[0].removeChild(f),d.tag("head")[0].appendChild(f),k()})};k()},define:function(a,b,c){var d,e=jl,f=arguments.length;1===f?(c=a,a=d):2===f&&(c=b,e.isArray(a)?(b=a,a=d):b=d),a=e.getPath(a);var g=new Array;!e.isArray(b)&&e.isFunction(c)&&(b=e.parseDependencies(c.toString()));for(var h in b)b[h]=e.getPath(b[h],a),e._requireLoad(b[h]),g.push(b[h]);var i={type:"define",path:a,deps:g,callback:c};e.moduleReady(i)},_requireLoad:function(a,b){var c=this;"css"==c._typeof(a)?c._loadcss(a,b):c._loadjs(a,b)},parseDependencies:function(a){var b=/\s*require\s*\(\s*"([^"]*)"\s*\)|\s*require\s*\(\s*'([^']*)'\s*\)/g,c=/\n\s*\/\/.*|\/\*[\S\s]*\*\//g,d=[];return a.replace(c,"").replace(b,function(a,b,c){b?d.push(b):c&&d.push(c)}),d},use:function(a,b){var c=this;c._curModPageId=c._modPageId(a);var d=c.params.preload,e=[],f=function(){if(c.isArray(a))for(var d in a)a[d]=c.getPath(a[d]),c._requireLoad(a[d]);else{if("string"!=typeof a)return;a=c.getPath(a),c._requireLoad(a)}var e={type:"use",deps:c.isArray(a)?a:[a],callback:b};c.moduleReady(e)};if(c.isArray(d)&&d.length>0)for(var g=0;g<d.length;g++)e[g]=c.getPath(d[g]),c._requireLoad(e[g]);else"string"==typeof d&&(e[0]=c.getPath(d),c._requireLoad(e[0]));var h={type:"preload",deps:e,callback:f};c.moduleReady(h)},_addTplNode:function(){var a=this;a.tplNode||(a.tplNode=a.ce("div"),a.tplNode.id=a.params.jasonBodyId,a.tag("body")[0].appendChild(a.tplNode))},_modPageId:function(a){return this.isArray(a)?a[0]:a},_curModPageName:function(a){var b=this;return b._modPageName(b._curModPageId,a)},_modPageName:function(a,b){return b=b?b:0,a=this.isArray(a)?a[0]:a,a.replace("/","_")+"_page_"+b},_showModPage:function(a){var b=this;for(var c in b._renderNode)b._renderNode[c].style.display=c==a?"block":"none";return!!b._renderNode[a]},html:function(a){var b=this;b._addTplNode(),b.tplNode.innerHTML='<div class="'+b._curModPageName()+'">'+a+"</div>"},show:function(a,b){var c=this,d=c._curModPageName(b);if(c._renderNode[d])c._renderNode[d].innerHTML=a;else{c._addTplNode();var e=c.ce("div");e.className=d,e.innerHTML=a,c.tplNode.appendChild(e),c._renderNode[d]=e}c._showModPage(d)},_gotoMod:function(a,b){var c=this;c.use(a,function(d){try{var e=c.cacheData[c._curModPageId]?c.cacheData[c._curModPageId]:"",f=new d(b);f.init(e)}catch(g){return c.showMask("模块："+a+"格式有误，请检查")}})},gotoMod:function(a,b,c){var d=this;d.cacheData[d._curModPageId]=c,d.cache.scrollTop[d._curModPageId]=d.getScrollTop(),d.setScrollTop(0),d._gotoMod(a,b,c)},backtoMod:function(a,b){var c=this;c._curModPageId=c._modPageId(a);var d=c._modPageName(a,b);c._showModPage(d)||c.gotoMod(a),c.cache.scrollTop[c._curModPageId]&&c.setScrollTop(c.cache.scrollTop[c._curModPageId])}},d}(window);window.jl||(window.jl=new jasonload({})),window.define=jl.define}var gCartMenuItemList=new Array;