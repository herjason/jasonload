/*
**author:jasonYang**
**web:jasonwap.zglingjie.com**
**email:914412726@qq.com**
*/
if(!window.jasonload||"function"!=typeof jasonload){var jasonload=window.jasonload=function(a){var b,c=function(a){var c=this;c.params=c.extend({},{ldImg:"",errImg:"",timeOut:1e4,base:"",alias:{},paths:{},vars:{},map:[],preload:[],prompt:!1,jsFolder:"",jsVer:"",jsVTag:"",cssFolder:"",cssVer:"",cssVTag:"",pageAnimate:!1,jasonBodyId:"jason_body",jasonContentClass:"jason_content"},a),c.vars={lockMask:0},c._vars={},c.jsLC=0,c.jsCC=0,c.cssLC=0,c.cssCC=0,c.cache={jsReady:"",jsLoading:"",cssLoading:"",cssReady:"",scrollTop:{},pathToId:{}},c._module={exports:{}},c.jsRelyData={},c.jsReadyCB=null,c.cssReadyCB=null,c.allReadyCB=null,c.moduleReadyCB=[],c._hbReadyCB=[],c._isHbReady=0,c.MaskNode=b,c.tplNode,c._renderNode={},c._is={},c._curModPageId="",c._pageData={},c._cacheData={},c._cacheDataExpire={},c._localData={},c._localExpired={},c._pageAniLeft=1};return c.fn=c.prototype={tag:function(a){return document.getElementsByTagName(a)},ce:function(a){return document.createElement(a)},isObject:function(a){return"object"==typeof a&&null!==a},isArray:function(a){return a instanceof Array&&a.push!=b},isFunction:function(a){return"function"==typeof a&&!(a instanceof RegExp)},getScrollTop:function(){return window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop},setScrollTop:function(a){a=isNaN(a)?0:a,window.scroll(0,a)},extend:function(a){if(a==b&&(a=this),1===arguments.length){for(var c in a)this[c]=a[c];return this}for(var d=Array.prototype.slice.call(arguments,1),e=0;e<d.length;e++)for(var c in d[e])a[c]=d[e][c];return a},_typeof:function(a){return".css"===a.substring(a.length-4)||a.indexOf(".css?")>=0?"css":"js"},getPath:function(a,c){var d=this,e=a;if(!a)return"";a=d.params.alias[a]!=b?d.params.alias[a]:a;var f=/^([^\/:]+)(\/.+)$/;(m=a.match(f))&&d.params.paths[m[1]]!=b&&(a=d.params.paths[m[1]]+m[2]);var g=/{([^{]+)}/g;a.indexOf("{")>-1&&(a=a.replace(g,function(a,c){return d.params.vars[c]!=b?d.params.vars[c]:a})),a=d.normalize(a),a=d.addBase(a,c);for(var h=a,i=0,j=d.params.map.length;j>i;i++){var k=d.params.map[i];if(h=d.isFunction(k)?k(a)||a:a.replace(k[0],k[1]),h!==a)break}return a=h,d.cache.pathToId[d.getId(a)]=e,a},addBase:function(a,b){var c=this,d=/^\/\/.|:\//,e=/^.*?\/\/.*?\//,f=location.href&&0!==location.href.indexOf("about:")?c.dirname(location.href):"",g=a,h=a.charAt(0);if(d.test(a))g=a;else if("."===h)g=c.realpath((b?c.dirname(b):f)+a);else if("/"===h){var i=f.match(e);g=i?i[0]+a.substring(1):a}else g="css"==c._typeof(a)?(""==c.params.cssFolder?c.params.base:c.params.cssFolder)+a:(""==c.params.jsFolder?c.params.base:c.params.jsFolder)+a;return 0===g.indexOf("//")&&(g=location.protocol+g),g},normalize:function(a){var b=a.length-1,c=a.charAt(b);return"#"===c?a.substring(0,b):".js"===a.substring(b-2)||a.indexOf(".js?")>=0||"/"===c||".css"===a.substring(b-3)||a.indexOf(".css?")>=0?a:a.indexOf("?")>0?a.substring(0,a.indexOf("?"))+".js"+a.substring(a.indexOf("?")):a+".js"},dirname:function(a){var b=/[^?#]*\//;return a.match(b)[0]},realpath:function(a){var b=/\/\.\//g,c=/\/[^\/]+\/\.\.\//,d=/([^:\/])\/+\//g;for(a=a.replace(b,"/"),a=a.replace(d,"$1/");a.match(c);)a=a.replace(c,"/");return a},getId:function(a){return a.indexOf(".js")>=0&&(a=a.substring(0,a.indexOf(".js"))),a},showMask:function(a,c){var d=this;if(d.vars.lockMask=1,"mask"==d.params.prompt){var e=function(){if(d.MaskNode==b||!d.MaskNode.parentNode){var c=d.ce("div"),e=a||"加载中...";c.innerHTML='<div class="jasonloadMaskNode" style="position:fixed;top:50%;left:50%;margin-top:-65px;width:220px;line-height:26px;padding:15px 0;background-color:#000;opacity:0.6;filter: alpha(opacity=60);z-index:1000;text-align:center;color:#fff;border-radius:4px;font-size:13px;"><div class="jasonloadMaskNodeBg" style="position:fixed;left:0;top:0;width:100%;height:100%;"></div><div class="jasonloadMaskNodeImg">'+(""!=d.params.ldImg?'<img src="'+d.params.ldImg+'" />':"")+'</div><div class="jasonloadMaskNodeText">'+e+"</div></div>",d.MaskNode=c.childNodes[0],d.tag("body")[0].appendChild(d.MaskNode),d.MaskNode.style["margin-left"]=-parseInt(d.MaskNode.style.width.replace("px",""))/2+"px"}};c?e():d._hbReady(function(){e()})}},hideMask:function(){var a=this;a.vars.lockMask=0;var c=function(){a.MaskNode==b||a.vars.lockMask||(a.MaskNode.parentNode&&a.MaskNode.parentNode.removeChild(a.MaskNode),a.MaskNode=b,clearTimeout(a.intervalHandle))};setTimeout(c,10)},config:function(a){var b=this;b.params=b.extend({},b.params,a)},_hbReady:function(a){var b=this,c=function(){if(b.tag("body")&&b.tag("body")[0]){b._isHbReady=1;for(var a=0;a<b._hbReadyCB.length;a++)b.checkCB(b._hbReadyCB[a]);b._hbReadyCB=[]}else setTimeout(c,1)};b._isHbReady?b.checkCB(a):(b._hbReadyCB.push(a),c())},jsReady:function(a){this.jsReadyC(a)},jsReadyC:function(a){var b=this;b.jsLC>=b.jsCC?(b.jsReadyCB=null,b.checkCB(a)):b.jsReadyCB=a},cssReady:function(a){var b=this;b.cssLC>=b.cssCC?(b.cssReadyCB=null,b.checkCB(a)):b.cssReadyCB=a},allReady:function(a){var b=this;b.jsLC>=b.jsCC&&b.cssLC>=b.cssCC?(b.allReadyCB=null,b.checkCB(a)):b.allReadyCB=a},moduleReady:function(a){var c=this;c.isObject(a)&&c.moduleReadyCB.push(a),a=c.moduleReadyCB;for(var d=a.length-1;d>=0;d--)if(!a[d].is_delete){for(var e=a[d],f=!0,g=0;g<e.deps.length;g++)("css"==c._typeof(e.deps[g])&&c.cache.cssReady.indexOf(e.deps[g])<0||"js"==c._typeof(e.deps[g])&&(e.deps[g].indexOf("?loadjs")<0&&c._getModule(c.getId(e.deps[g]))==b||e.deps[g].indexOf("?loadjs")>0&&c.cache.jsReady.indexOf(e.deps[g])<0))&&(f=!1);f&&(e.is_delete=1,c.checkCB(e))}},checkCB:function(b){var c=this;if(c.jsLC>=c.jsCC&&c.cssLC>=c.cssCC&&c.hideMask(),c.isFunction(b))b();else if(c.isObject(b)){var d=b;if("preload"==d.type)d.callback();else if("use"==d.type){for(var e=[],f=0;f<d.deps.length;f++)e[f]=c._getModule(c.getId(d.deps[f]));d.callback.apply(a,e)}else if("define"==d.type){var g=function(a){return a=c.getPath(a,d.path),c._getModule(c.getId(a))?c._getModule(c.getId(a)):("js"==c._typeof(a)&&a.indexOf("?loadjs")<0&&(c._requireLoad(c.getPath(a)),alert("error:"+a+" hadn't loaded or not a module js.if it is not a module,you can add “loadjs” to the next of “?”")),!1)};g.async=function(a,b){var d=c.params.prompt;c.params.prompt=!1,c._requireLoad(c.getPath(a),b),c.params.prompt=d};var h=d.callback(g,c._module.exports,c._module);h?c._setModule(c.getId(d.path),h):(c._setModule(c.getId(d.path),c._module.exports),c._module.exports={})}}},jsRely:function(a,b,c){var d=this;""!=a&&""!=b&&(a=d.getPath(a),b=d.getPath(b),d.jsCC++,d.showMask(),d._hbReady(function(){if(d.cache.jsReady.indexOf(a)>=0)d._load("js",b,c);else if(d.cache.jsLoading.indexOf(a)>=0){"undefined"==typeof d.jsRelyData[a]&&(d.jsRelyData[a]=[]);var e={path:b,callback:c};d.jsRelyData[a].push(e)}else d._loadjs(a,function(){d._load("js",b,c)})}))},js:function(a,b){var c=this;a=c.getPath(a),c._loadjs(a,b)},css:function(a,b){var c=this;a=c.getPath(a),c._loadcss(a,b)},load:function(a,b){var c=this;c._requireLoad(c.getPath(a),b)},_loadjs:function(a,b){var c=this;""==a||c.cache.jsLoading.indexOf(a)>=0||(c.jsCC++,c.cache.jsLoading+=a,c.showMask(),c._hbReady(function(){c._load("js",a,b)}))},_loadcss:function(a,b){var c=this;""==a||c.cache.cssLoading.indexOf(a)>=0||(c.cssCC++,c.cache.cssLoading+=a,c.showMask(),c._hbReady(function(){c._load("css",a,b)}))},_load:function(a,b,c){var d=this,e=!1;if("css"==a){var f=d.ce("link");f.type="text/css",f.rel="stylesheet",f.href=b+(b.indexOf("?")<0?"?":"")+"v"+d.params.cssVer+d.params.cssVTag[d.cache.pathToId[d.getId(b)].replace("/","_")]}else{var f=d.ce("script");f.type="text/javascript",f.src=b+(b.indexOf("?")<0?"?":"")+"v"+d.params.jsVer+d.params.jsVTag[d.cache.pathToId[d.getId(b)].replace("/","_")]}var g=d.tag("head")[0];b.indexOf("?insertToFirst")>=0?g.insertBefore(f,g.childNodes[0]):g.appendChild(f);var h=function(){if("css"==a)d.cache.cssReady+=b,d.cssLC++,d.checkCB(c),null!=d.cssReadyCB&&d.cssReady(d.cssReadyCB);else{if(d.cache.jsReady+=b,d.cache.jsLoading.replace(b,""),d.jsLC++,d.checkCB(c),null!=d.jsReadyCB&&d.jsReadyC(d.jsReadyCB),"undefined"!=typeof d.jsRelyData[b])for(var e=d.jsRelyData[b],g=0;g<e.length;g++)d._load("js",e[g].path,e[g].callback);setTimeout(function(){d.tag("head")[0].removeChild(f)},10)}null!=d.allReadyCB&&d.allReady(d.allReadyCB),d.moduleReadyCB.length>0&&setTimeout(function(){d.moduleReady("0")},10)},i=function(){("loaded"==f.readyState||"complete"==f.readyState)&&h()},j=function(){var a=!1;f.sheet&&(h(),a=!0),a||setTimeout(function(){j()},1)},k=function(){"css"==a&&/webkit/i.test(navigator.userAgent)&&(j(),e=!0),"undefined"!=typeof f.onreadystatechange&&(f.onreadystatechange=i,e=!0),"undefined"==typeof f.onload||e||(f.onload=h),"undefined"!=typeof f.onerror&&(f.onerror=function(){d.cache.jsLoading.replace(b,""),d.tag("head")[0].removeChild(f),d.tag("head")[0].appendChild(f),k()})};k()},define:function(a,b,c){var d,e=jl,f=arguments.length;1===f?(c=a,a=d):2===f&&(c=b,e.isArray(a)?(b=a,a=d):b=d),a=e.getPath(a);var g=new Array;!e.isArray(b)&&e.isFunction(c)&&(b=e.parseDependencies(c.toString()));for(var h=0;h<b.length;h++)b[h]=e.getPath(b[h],a),e._requireLoad(b[h]),g.push(b[h]);var i={type:"define",path:a,deps:g,callback:c};e.moduleReady(i)},_requireLoad:function(a,b){var c=this;if("css"==c._typeof(a))c._loadcss(a,b);else{if(c._getModule(c.getId(a)))return;c._loadjs(a,b)}},parseDependencies:function(a){var b=/\s*require\s*\(\s*"([^"]*)"\s*\)|\s*require\s*\(\s*'([^']*)'\s*\)/g,c=/\n\s*\/\/.*|\/\*[\S\s]*\*\//g,d=[];return a.replace(c,"").replace(b,function(a,b,c){b?d.push(b):c&&d.push(c)}),d},use:function(a,b){var c=this,d=c.params.preload,e=[],f=function(){if(c.isArray(a))for(var d=0;d<a.length;d++)a[d]=c.getPath(a[d]),c._requireLoad(a[d]);else{if("string"!=typeof a)return;a=c.getPath(a),c._requireLoad(a)}var e={type:"use",deps:c.isArray(a)?a:[a],callback:b};c.moduleReady(e)};if(c.isArray(d)&&d.length>0)for(var g=0;g<d.length;g++)e[g]=c.getPath(d[g]),c._requireLoad(e[g]);else"string"==typeof d&&(e[0]=c.getPath(d),c._requireLoad(e[0]));var h={type:"preload",deps:e,callback:f};c.moduleReady(h)},_addTplNode:function(){var a=this;a.tplNode||(a.tplNode=a.ce("div"),a.tplNode.id=a.params.jasonBodyId,a.tag("body")[0].appendChild(a.tplNode))},_addModTplNode:function(a,b,c){var d=this,e=d.ce("div");e.className=b,e.innerHTML=a,"html"==c&&(d.tplNode.innerHTML=""),d.tplNode.appendChild(e),"html"==c&&(d._renderNode=[]),d._renderNode[b]=e},_modPageId:function(a){return this.getId(this.isArray(a)?a[0]:a)},_curModPageName:function(a){var b=this;return b._modPageName(b._curModPageId,a)},_modPageName:function(a,b){return b=b?b:0,a=this.isArray(a)?a[0]:a,a.replace("/","_")+"_page_"+b},_showModPage:function(a){var b=this,c=b._renderNode[a];if(!b._renderNode[a])return!1;for(var d in b._renderNode)d!=a&&(b._renderNode[d].style.display="none");c.style.display="block";var e=parseInt(b.params.pageAnimate);return isNaN(e)||(b.tag("body")[0].style["overflow-x"]="hidden",c.style.position="absolute",c.style.right=b._pageAniLeft?"-100%":"100%",c.style.top="0",c.style["z-index"]=9999,c.style.width="100%",c.style.transition=e+"ms",setTimeout(function(){c.style.right=0,setTimeout(function(){c.removeAttribute("style"),b.tag("body")[0].removeAttribute("style")},e)},30)),!0},html:function(a){var b=this;b._addTplNode(),b._addModTplNode(a,b._curModPageName(),"html"),b._showModPage(b._curModPageName())},show:function(a,b){var c=this,d=c._curModPageName(b);if(c._renderNode[d])c._renderNode[d].innerHTML=a;else{c._addTplNode();{c.ce("div")}c._addModTplNode(a,d,"show")}c._showModPage(d)},initMod:function(a){var b=this;b.gotoMod(""!=b._getVar("curModPageId")&&window.location.href.indexOf("#")>=0?b._getVar("curModPageId"):a)},_gotoMod:function(a,b,c,d){var e=this;e._pageData[e._curModPageId]=c,e.cache.scrollTop[e._curModPageId]=e.getScrollTop(),e.setScrollTop(0);var f=e._curModPageId=e._modPageId(a);e._setVar("curModPageId",f),b&&e._setVar("mod_opt_"+f,b,86400),e.use(a,function(b){try{var c=e._pageData[e._curModPageId]?e._pageData[e._curModPageId]:"",g=new b(e._getVar("mod_opt_"+f));g.init(c),window.location.href="#!currentModPage",e.isFunction(d)&&d()}catch(h){return e.showMask("模块："+a+"格式有误，请检查")}})},gotoMod:function(a,b,c,d){var e=this;e.isFunction(b)?(d=b,b={}):e.isFunction(c)&&(d=c,c={}),e._hbReady(function(){e._pageAniLeft=1,e._gotoMod(a,b,c,d)})},backtoMod:function(a,b){var c=this;c._pageAniLeft=0;var d=c._curModPageId=c._modPageId(a);c._setVar("curModPageId",d);var e=c._modPageName(a,b);c._showModPage(e,!0)||c._gotoMod(a),c.cache.scrollTop[c._curModPageId]&&c.setScrollTop(c.cache.scrollTop[c._curModPageId]),window.location.href="#!currentModPage"},_setVar:function(a,b,c){this._setLocal("var_"+a,b,c)},_getVar:function(a){return this._getLocal("var_"+a)},_setModule:function(a,b){this._module[a]=b},_getModule:function(a){return this._module[a]},setData:function(a,b,c,d){var e,f=this;"string"==typeof c&&(d=c,c=e),d=d?d:f._curModPageId,f._setLocal("cacheData_"+d+"_"+a,b,c)},getData:function(a,b){var c=this;return b=b?b:c._curModPageId,c._getLocal("cacheData_"+b+"_"+a)},_setLocal:function(a,b,c){var d,e=this;if(!isNaN(parseInt(c))&&c!==!1){var f=new Date;d=f.getTime()+1e3*c}e.localSupport()&&c!==!1?(localStorage.setItem("jl_local_"+a,JSON.stringify(b)),localStorage.setItem("jl_localExpired_"+a,d)):(e._localData[a]=b,e._localExpired[a]=d,c===!1&&e._removeLocal(a))},_getLocal:function(a){var b=this,c=b._localData[a],d=b._localExpired[a];if(!c&&b.localSupport())try{c=JSON.parse(localStorage.getItem("jl_local_"+a)),d=localStorage.getItem("jl_localExpired_"+a)}catch(e){return""}if(!isNaN(parseInt(d))){var f=new Date;f.getTime()>d&&(c="",b._removeLocal())}return c||(c=""),c},_removeLocal:function(a){var b=this;b.localSupport()&&(localStorage.removeItem("jl_local_"+a),localStorage.removeItem("jl_localExpired_"+a))},localSupport:function(){try{if(!("localStorage"in window&&null!=window.localStorage&&"JSON"in window))return!1}catch(a){return!1}return!0}},c}(window);window.jl||(window.jl=new jasonload({})),window.define=jl.define,window.define.cmd=window.define.amd={jQuery:1,appframework:1}}