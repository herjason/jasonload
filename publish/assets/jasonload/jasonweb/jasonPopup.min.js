/*
**author:jasonYang**
**web:jasonwap.zglingjie.com**
**email:914412726@qq.com**
*/
define("jasonweb/jasonPopup",["jquery","./css/jasonPopup.css?insertToFirst"],function(a,b,c){var d=a("jquery");!function(a){var b;a.jasonPopup=a.fn.jasonPopup=function(a){return new d(a)};var c=new Array,d=function(d){var e=this;e.popupNode=b,e.windowHeight=a(window).outerHeight(),e.isLock=0,e.hasPopupPosition=0,e.isBlurPosition=!1,e.opt=a.extend({},{jasonPopupClass:"jasonPopup",bgStyle:"",boxStyle:"",title:"",titleStyle:"",titleLeftBtn:!1,titleLeftText:"取消",titleLeftStyle:"",titleLeftCallback:function(){},titleRightBtn:!1,titleRightText:"确定",titleRightStyle:"",titleRightCallback:function(){},message:"",messageStyle:"",btnStyle:"",cancelText:"取消",cancelStyle:"",cancelCallback:function(){},doneText:"确认",doneStyle:"",doneCallback:function(){},cancelOnly:!1,noBtn:d.position&&"center"!=d.position?!0:!1,isBgClick:!1,position:"center",height:"auto",maxHeight:.8,duration:300,closeBtn:!1,closeText:"",closeStyle:"",closeCallback:function(){},isScroll:!0,onShow:function(){}},d),e.prepend(),c.push(e)};d.fn=d.prototype={prepend:function(){var b,d,e,f=this,g=f.opt.jasonPopupClass,h=f.opt.bgStyle,i=f.opt.boxStyle,j=f.opt.title,k=f.opt.titleStyle,b=f.opt.titleLeftBtn,l=f.opt.titleLeftText,m=f.opt.titleLeftStyle,n=f.opt.titleLeftCallback,d=f.opt.titleRightBtn,o=f.opt.titleRightText,p=f.opt.titleRightStyle,q=f.opt.titleRightCallback,r=f.opt.message,s=f.opt.messageStyle,t=f.opt.btnStyle,u=f.opt.cancelText,v=f.opt.cancelStyle,w=f.opt.cancelCallback,x=f.opt.doneText,y=f.opt.doneStyle,z=f.opt.doneCallback,A=f.opt.cancelOnly,B=f.opt.noBtn,C=f.opt.isBgClick,D=f.opt.position,E=f.opt.closeBtn,F=f.opt.closeText,G=f.opt.closeStyle,H=f.opt.closeCallback,I=f.opt.onShow,J=document.createElement("div");b=b?'<div class="jasonPopuptitleLeftBtn" style="'+m+'">'+l+"</div>":"",d=d?'<div class="jasonPopuptitleRightBtn" style="'+p+'">'+o+"</div>":"",e=E?'<div class="jasonPopupCloseBtn" style="'+G+'">'+F+"</div>":"";var K='<div class="jasonPopupBgDiv" style="z-index:'+(1e3+c.length)+";"+h+'"></div><div class="jasonPopupBox '+("center"==D?"jasonPopupBoxCenter":"bottom"==D?"jasonPopupBoxBottom":"top"==D?"jasonPopupBoxTop":"right"==D?"jasonPopupBoxRight":"jasonPopupBoxLeft")+'" style="z-index:'+(1001+c.length)+";"+i+'">'+(""==j?"":'<div class="jasonPopupTitle" style="'+k+'">'+b+j+d+e+"</div>")+'<div class="jasonPopupContent" style="'+s+'">'+r+"</div>";B||(K+='<ul class="jasonPopupBtn" style="'+t+'">	<li class="jasonPopupCancelBtn'+(A?" jasonPopupCancelOnlyBtn":"")+'" style="'+v+'">'+u+"</li>"+(A?"":'<li class="jasonPopupDoneBtn" style="'+y+'">'+x+'</li><li style="height:0;clear:both;"></li>')+"</ul>"),K+="</div>",J.innerHTML=K,f.popupNode=J;var L=a(J);L.attr("class",g),a("body").append(J),B||(L.find(".jasonPopupBtn li").eq(0).bind("click",function(){w(),f.remove()}),A||L.find(".jasonPopupBtn li").eq(1).bind("click",function(){z(),f.remove()})),C&&L.find(".jasonPopupBgDiv").bind("click",function(){H(),f.remove()}),L.find(".jasonPopuptitleLeftBtn").bind("click",function(){n(),f.remove()}),L.find(".jasonPopuptitleRightBtn").bind("click",function(){q(),f.remove()}),L.find(".jasonPopupCloseBtn").bind("click",function(){H(),f.remove()}),f.opt.duration="center"==D?300:500,f.positionPopup(),I()},lock:function(){this.isLock=1},unlock:function(){this.isLock=0},show:function(){a(this.popupNode).show()},hide:function(b){var c=this,d=isNaN(b)?c.opt.duration:b;a(c.popupNode).hide(d)},remove:function(b){var d=this;if(!d.isLock){var e=(d.opt.position,isNaN(b)?d.opt.duration:b);a(d.popupNode).hide(e),setTimeout(function(){c.splice(0,1),a(d.popupNode).remove(),c.length>0&&c[0].show()},e)}},positionPopup:function(b){var c=this,d=b?b:0,e=c.opt.position,f=a(c.popupNode).find(".jasonPopupBox"),g=c.opt.duration;f.css({display:"block","transition-duration":g+"ms"});var h=f.outerWidth();f.css("right"==e?"right":"left","right"==e||"left"==e?0:(a(window).outerWidth()-h)/2);var i=c.windowHeight,j=isNaN(c.opt.maxHeight)?1:c.opt.maxHeight,k=isNaN(c.opt.height)?f.outerHeight():c.opt.height<=1?c.opt.height*i:c.opt.height;k=k>i*j-d?i*j-d:k;var l=""==c.opt.title?0:f.find(".jasonPopupTitle").outerHeight(),m=c.opt.noBtn?0:f.find(".jasonPopupBtn").outerHeight();("right"==e||"left"==e)&&f.css("transition-duration","0ms");var n=k-l-m;if((!isNaN(c.opt.height)||f.find(".jasonPopupContent").outerHeight()>n)&&(f.find(".jasonPopupContent").css({height:n+"px"}),c.opt.isScroll&&f.find(".jasonPopupContent").css("overflow","auto")),f.css("bottom"==e?"bottom":"top","bottom"==e?d:"top"==e?-d:(i-2*d-f.outerHeight())/2),"right"==e||"left"==e){var o=function(){f.css("transition-duration",g+"ms")};setTimeout(o,10)}}}}(d),d.alertDlg=d.fn.alertDlg=function(a,b){return d.jasonPopup({title:"提示",message:'<div style="margin:0 3%;font-size:0.875em;">'+a+"</div>",cancelText:"确定",cancelCallback:b||function(){},cancelOnly:!0})},d.confirmDlg=d.fn.confirmDlg=function(a,b,c){return d.jasonPopup({title:"提示",message:'<div style="margin:0 3%;font-size:0.875em;">'+a+"</div>",doneText:"确定",doneCallback:b||function(){},cancelCallback:c||function(){}})},c.exports=d});