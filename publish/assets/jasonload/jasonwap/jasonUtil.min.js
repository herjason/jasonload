/*
**author:jasonYang**
**web:jasonload.zglingjie.com**
**email:914412726@qq.com**
*/
define("jasonwap/jasonUtil",["appframework"],function(a,b,c){var d=a("appframework"),e={ajaxMask:"mask",lockMask:0,maskNode:null};e.showMask=function(a){var b=this,a=a||"请求中...",c=d(".jasonUtilMaskNode");if(b.lockMask=1,"mask"==b.ajaxMask)if("object"==typeof jl&&"function"==typeof jl.showMask)jl.showMask(a,!0);else{if(c.length<=0){var e='<div class="jasonUtilMaskNode" style="position:fixed;top:50%;left:50%;min-width:220px;max-width:500px;line-height:26px;padding:10px 0;background-color:#000;opacity:0.6;filter: alpha(opacity=60);z-index:9999;text-align:center;border-radius:4px;"><div class="jasonUtilMaskNodeBg" style="position:fixed;left:0;top:0;width:100%;height:100%;z-index:9998;background-color:#000;opacity:0;filter: alpha(opacity=0);"></div><div class="jasonUtilMaskNodeImg" style="position:relative;z-index:9999;">'+(!b.isStrEmpty(b.imgUrl)||"object"==typeof jl&&"object"==typeof jl.params&&!b.isStrEmpty(jl.params.ldImg)?'<img src="'+(b.isStrEmpty(b.imgUrl)?b.imgUrl:jl.params.ldImg)+'" />':"")+'</div><div class="jasonUtilMaskNodeText" style="color:#fff;font-size:14px;padding:10px 15px 0;position:relative;z-index:9999;">'+a+"</div>";d("body").append(e),c=d(".jasonUtilMaskNode")}else c.find(".jasonUtilMaskNodeText").html(a);d(".jasonUtilMaskNode").css({"margin-left":-c.width()/2,"margin-top":-c.height()/2})}},e.hideMask=function(){var a=this,b=d(".jasonUtilMaskNode");if(a.lockMask=0,"object"==typeof jl&&"function"==typeof jl.hideMask)jl.hideMask();else{var c=function(){b.length>0&&!a.lockMask&&b.remove()};setTimeout(c,10)}},e.flashMask=function(a,b,c){var d=this;d.showMask(a),setTimeout(function(){d.hideMask(),"function"==typeof b?b():"function"==typeof c&&c()},isNaN(b)?2e3:b)},e.getScrollTop=function(){return"pageYOffset"in window?window.pageYOffset:"BackCompat"===document.compatMode?document.body.scrollTop:document.documentElement.scrollTop},e.setScrollTop=function(a){window.pageYOffset=a,document.body.scrollTop=a,document.documentElement.scrollTop=a},e.getDocumentHeight=function(){return document.body.clientHeight||document.documentElement.clientHeight},e.gotoUrl=function(a,b){var c=this;c.showMask("加载中..."),window.setTimeout(function(){c.hideMask(),window.location.href=a},isNaN(b)?300:b)},e.isStrEmpty=function(a){return null==a?!0:"null"==a?!0:"undefined"==typeof a?!0:""==typeof a?!0:"\n"==typeof a?!0:0==a.length?!0:!1},e.ajaxJson=function(a,b,c,e,f){var g=this;"mask"==g.ajaxMask&&g.showMask();var h=new Date;b=b+"?"+h.getTime(),d.ajax({type:a,url:b,data:c,success:function(a){if(g.hideMask(),a+="","function"!=typeof e||e instanceof RegExp)return g.flashMask("错误提示：请传入正确的回调函数");try{var b=JSON.parse(a)}catch(c){g.flashMask("undefined"==typeof interface_return_data_error||g.isStrEmpty(interface_return_data_error)?"请求失败：后端数据接口返回json数据格式错误！":interface_return_data_error,isNaN(f)?3e3:f)}e(b)},error:function(){g.hideMask(),g.flashMask("undefined"==typeof ajax_error||g.isStrEmpty(ajax_error)?"请求失败：网络出错或超时！":ajax_error,isNaN(f)?3e3:f)}})},e.getJson=function(a,b,c,d){this.ajaxJson("get",a,b,c,d)},e.postJson=function(a,b,c,d){this.ajaxJson("post",a,b,c,d)},e.radioVal=function(a){var b="";return d(a).each(function(){this.checked&&(b=this.value)}),b},e.getParam=function(a){for(var b=window.location.href,c=b.substring(b.indexOf("?")+1),d=c.split("&"),e=0;e<d.length;e++){var f=d[e].split("=");if(f[0]==a)return f[1].indexOf("#")>=0?f[1].substring(0,f[1].indexOf("#")):f[1]}return""},e.weixinReady=function(a){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",a,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",a),document.attachEvent("onWeixinJSBridgeReady",a)):a()},e.getTime=function(a){for(var b=this,c=a.split(" "),d=[],e=[],f=0;f<c.length;f++)c[f].indexOf("-")>=0?d=c[f].split("-"):c[f].indexOf("/")>=0?d=c[f].split("/"):c[f].indexOf(":")>=0&&(e=c[f].split(":"));d.length>0&&3!=d.length&&b.flashMask("日期格式错误"),e.length>0&&2!=e.length&&3!=e.length&&b.flashMask("时间格式错误");for(var f=0;f<d.length;f++)d[f]=parseInt(d[f],10);for(var f=0;f<e.length;f++)e[f]=parseInt(e[f],10);2==e.length&&(e[2]=0);var g=new Date;return 3==d.length&&g.setFullYear(d[0],d[1]-1,d[2]),3==e.length?g.setHours(e[0],e[1],e[2]):g.setHours(0,0,0),g.getTime()},c.exports=e});