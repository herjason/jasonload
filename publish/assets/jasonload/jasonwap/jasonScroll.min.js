/*
**author:jasonYang**
**web:jasonwap.zglingjie.com**
**email:914412726@qq.com**
*/
define("jasonwap/jasonScroll",["appframework"],function(a){var b=a("appframework");return function(a){var b=[];a.fn.jasonScrollX=function(c){var d=a.extend({},{speed:3e3,needTime:300,nav:"",navClass:"on"},c),e=d.speed,f=d.needTime,g=d.nav,h=d.navClass;b.index=0;var i=a(this),j=a(g);if(scrollBoxScroC=(this[0].id||this[0].className).substring(1)+"ScroC",null==i||!i)return void console.log("errer:scrollBox do not find!");i.css("clear","both"),i.children().css("float","left");var k=parseFloat(i.children().width()),l=i.children().length;if(i.children().css("width",k),!(1>=l)){var m='<div style="width:100%; height:100%; overflow:hidden; position:relative;">';m+='	<div id="'+scrollBoxScroC+'" style="width:'+k*l*2+"px; height:100%; top:0; left:-"+k*l+'px; position:absolute;">'+i.html()+i.html()+"</div>",m+="		</div>",i.html(m),$scrollBoxScroC=a("#"+scrollBoxScroC);var n,o,p;i.on("touchstart",function(a){$scrollBoxScroC.jasonStopAnimate(!0,!0);var c=o>0?p+k:p-k;c>=0?$scrollBoxScroC.css("left",c-k*l):c<=-(parseFloat($scrollBoxScroC.width())-k)&&$scrollBoxScroC.css("left",c+k*l),clearTimeout(b[scrollBoxScroC]),n=a.touches[0].pageX,p=parseFloat($scrollBoxScroC.css("left"))}),i.on("touchmove",function(a){a.preventDefault();var b=a.touches[0].pageX;o=b-n,n=b;var c=parseFloat($scrollBoxScroC.css("left"))+o;$scrollBoxScroC.css("left",c)}),i.on("touchend",function(){var a=o>0?p+k:p-k;Math.abs(p-parseFloat($scrollBoxScroC.css("left")))>k/2&&0>=a&&a>=-(parseFloat($scrollBoxScroC.width())-k)?$scrollBoxScroC.jasonAnimate("left",a,f,function(){(o>0?--b.index:++b.index)>=l&&(b.index=0),b.index<0&&(b.index=l-1),j.removeClass(h).eq(b.index).addClass(h),a>=0?$scrollBoxScroC.css("left",a-k*l):a<=-(parseFloat($scrollBoxScroC.width())-k)&&$scrollBoxScroC.css("left",a+k*l),b[scrollBoxScroC]=setTimeout("$scrollBoxScroC.jasonScrollXAuto({speed:"+e+",needTime:"+f+",childWidth:"+k+",childrenLen:"+l+',nav:"'+g+'",navClass:"'+h+'"})',e)}):$scrollBoxScroC.jasonAnimate("left",p,f,function(){b[scrollBoxScroC]=setTimeout("$scrollBoxScroC.jasonScrollXAuto({speed:"+e+",needTime:"+f+",childWidth:"+k+",childrenLen:"+l+',nav:"'+g+'",navClass:"'+h+'"})',e)})}),b[scrollBoxScroC]=setTimeout("$scrollBoxScroC.jasonScrollXAuto({speed:"+e+",needTime:"+f+",childWidth:"+k+",childrenLen:"+l+',nav:"'+g+'",navClass:"'+h+'"})',e)}},a.fn.jasonScrollXAuto=function(c){var d=a.extend({},{speed:3e3,needTime:300,childWidth:320,childrenLen:3,nav:"",navClass:"on"},c),e=this[0].id,f=a(this),g=d.speed,h=d.needTime,i=d.childWidth,j=d.childrenLen,k=d.nav,l=d.navClass,m=a(k),n=parseFloat(f.css("left"))-i;f.jasonAnimate("left",n,h,function(){++b.index>=j&&(b.index=0),m.removeClass(l).eq(b.index).addClass(l),n>=0?f.css("left",n-i*j):n<=-(parseFloat(f.width())-i)&&f.css("left",n+i*j),b[e]=setTimeout("$scrollBoxScroC.jasonScrollXAuto({speed:"+g+",needTime:"+h+",childWidth:"+i+",childrenLen:"+j+',nav:"'+k+'",navClass:"'+l+'"})',g)})}}(b),function(a){var b=[];a.fn.jasonAnimate=function(c,d,e,f){var g=a(this),h=this,i=this[0].id;b.currentId=i,b[i]=h,b[i].params=c,b[i].newValue=d;var j=parseFloat(g.css(c)),k=(d-j)/(e/10),l=k;b[i].intervalId=setInterval(function(){g.css(c,j+l),l+=k,Math.abs(l)>Math.abs(d-j)&&(clearInterval(b[i].intervalId),g.css(c,d),"function"==typeof f&&f())},10)},a.fn.jasonStopAnimate=function(c,d){if(clearInterval(b.intervalId),c)for(var e in b)clearInterval(b[e].intervalId),d&&a(b[e]).css(b[e].params,b[e].newValue);else clearInterval(b[b.currentId].intervalId),d&&a(b[b.currentId]).css(b[b.currentId].params,b[b.currentId].newValue)}}(b),b});